<html>
<body>

    <script id="shader-vs" type="x-shader/x-vertex">

        attribute vec3 vPos;
        attribute float progress;

        varying float drawTime;

        uniform mat4 PVMatrix;
        uniform mat4 MMatrix;
        uniform float time;
        uniform float lineDist;

        void main(void) {
            float drawSpeed = 6.0; // 6
            int linesPerRay = 6;

            float progress2 = (progress + lineDist) / float(linesPerRay);

            drawTime = progress2 - (time * drawSpeed);
            gl_Position = PVMatrix * MMatrix * vec4(vPos, 1.0);
        }

    </script>

    <script id="shader-fs" type="x-shader/x-fragment">

        precision highp float;

        varying float drawTime;

        void main(void) {
            float minBrightness = 0.6;
            float falloff = .3;

            float modTime = drawTime - floor(drawTime);
            float lengthened = 1.0 - pow((1.0 - modTime), falloff);

            float b = clamp(lengthened + minBrightness, 0.0, 1.0);
            gl_FragColor = vec4(1.0, 1.0, 1.0, b);
        }

    </script>

    <script src="gl-matrix-min.js"></script>
    <script src="view.js"></script>
    <script src="gl.js"></script>
    <script src="shaders.js"></script>
    <script src="line.js"></script>
    <script src="Shapes.js"></script>
    <script src="main.js"></script>


</body>
</html>
